{"version":3,"sources":["webpack:///./lib/ReactViews/Tools/DeltaTool/DeltaTool.jsx","webpack:///./lib/ReactViews/Tools/DeltaTool/delta-tool.scss","webpack:///./lib/ReactViews/Tools/DeltaTool/DatePickers.jsx","webpack:///./lib/ReactViews/Tools/DeltaTool/LocationPicker.jsx"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","_dateformat","_interopRequireDefault","_propTypes","_react","__esModule","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_interopRequireWildcard","_raiseErrorToUser","_deltaTool","_DatePickers","_LocationPicker","_duplicateItem","_prettifyCoordinates","_reactI18next","WeakMap","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","length","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","DeltaTool","_ref","terria","tool","onCloseTool","t","type","catalogItem","item","supportsDeltaComparison","_useState2","useState","setItem","_useState4","location","setLocation","_useState6","discreteTime","primaryDate","setPrimaryDate","_useState8","secondaryDate","setSecondaryDate","_useState10","beforePick","afterPick","pickerMessages","setPickerMessages","useEffect","isShown","newItem","isEnabled","useOwnClock","createElement","className","deltaTool","title","body","PrettyLocation","buttons","cancelBtn","onClick","generateDeltaBtn","timestamp","Date","concat","featureTimesProperty","clock","intervals","disableUserChanges","firstDateStr","dateDisplayFormat","secondDateStr","shortReport","split","map","ln","trim","join","firstDateParam","dateParamFormat","secondDateParam","parameters","showDeltaImagery","disabled","onPick","picked","latLong","feature","features","imageryLayer","filterIntervalsByFeature","availableDates","_availableDates$slice2","setDatesFromAvailableDates","e","messages","_ref2","useTranslation","prettyLocation","longitude","latitude","date","propTypes","object","isRequired","func","displayName","_default","withTranslation","module","_defined","_DateFormats","_DateTimePicker","_Icon","DatePickers","pickers","useDatePickerState","_setIsOpen","pickerId","isOpen","_ref3","thisPicker","otherPicker","setIsOpen","dateFormatting","dateFormat","currentTime","datePickers","DatePicker","setDate","_ref4","formattedDate","formatDateTime","_findNextAndPrevDates","dateIndex","indexOf","prevDate","nextDate","findNextAndPrevDates","pickerButtons","previousDate","glyph","GLYPHS","previous","currentDate","stopPropagation","picker","dates","onChange","popupStyle","datePickerPopup","openDirection","showCalendarButton","onOpen","onClose","array","string","bool","_Ellipsoid","_Math","_knockout","_LocationMarkerUtils","_MapInteractionMode","_Loader","LocationPicker","currentPick","pickPointMode","message","mapInteractionModeStack","showMarker","subscription","getObservable","subscribe","thisPick","customUi","cartesian","carto","position","pickPosition","WGS84","cartesianToCartographic","toDegrees","allFeaturesAvailablePromise","then","dispose","stopInteractionMode","removeMarker","addMarker","pop"],"mappings":"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","file":"3.TerriaJS-specs.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _dateformat = _interopRequireDefault(require(\"dateformat\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _raiseErrorToUser = _interopRequireDefault(require(\"../../../Models/raiseErrorToUser\"));\n\nvar _deltaTool = _interopRequireDefault(require(\"./delta-tool.scss\"));\n\nvar _DatePickers = _interopRequireDefault(require(\"./DatePickers\"));\n\nvar _LocationPicker = _interopRequireDefault(require(\"./LocationPicker\"));\n\nvar _duplicateItem = _interopRequireDefault(require(\"../../../Models/duplicateItem\"));\n\nvar _prettifyCoordinates = _interopRequireDefault(require(\"../../../Map/prettifyCoordinates\"));\n\nvar _reactI18next = require(\"react-i18next\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * A tool for comparing imagery at two points in time.\n */\nfunction DeltaTool(_ref) {\n  var terria = _ref.terria,\n      tool = _ref.tool,\n      onCloseTool = _ref.onCloseTool,\n      t = _ref.t;\n  var type = tool.type,\n      catalogItem = tool.item;\n\n  if (type !== \"delta\" || !(catalogItem && catalogItem.supportsDeltaComparison)) {\n    return null;\n  }\n\n  var _useState = (0, _react.useState)(undefined),\n      _useState2 = _slicedToArray(_useState, 2),\n      item = _useState2[0],\n      setItem = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      location = _useState4[0],\n      setLocation = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(catalogItem.discreteTime),\n      _useState6 = _slicedToArray(_useState5, 2),\n      primaryDate = _useState6[0],\n      setPrimaryDate = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(catalogItem.discreteTime),\n      _useState8 = _slicedToArray(_useState7, 2),\n      secondaryDate = _useState8[0],\n      setSecondaryDate = _useState8[1];\n\n  var _useState9 = (0, _react.useState)({\n    beforePick: \"Select a point by clicking on the map\",\n    afterPick: \"Click another point to change the selection\"\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pickerMessages = _useState10[0],\n      setPickerMessages = _useState10[1];\n\n  (0, _react.useEffect)(function () {\n    // On mount; to avoid showing both imageries at once, we temporarily disable the parent catalog item.\n    catalogItem.isShown = false;\n    return function () {\n      // Re-enable on unmount\n      catalogItem.isShown = true;\n    };\n  }, []); // Duplicate the catalog item\n\n  (0, _react.useEffect)(function () {\n    var newItem = (0, _duplicateItem[\"default\"])(catalogItem, undefined, catalogItem.name + \" (copy)\");\n    newItem.isEnabled = true;\n    newItem.isShown = true;\n    newItem.useOwnClock = true;\n    setItem(newItem);\n  }, [catalogItem]);\n\n  function onUserPickLocation(picked, latLong) {\n    // TODO: If the item imagery has not loaded yet, features[] will be empty.\n    // Ideally, pick location should be called only after the item imagery has been loaded\n    // and we need some way to check that.\n    // IE has no array.find() so we use the clunkier for loop to find the feature.\n    var feature;\n\n    for (var i = 0; i < picked.features.length; i++) {\n      if (picked.features[i].imageryLayer === item.imageryLayer) {\n        feature = picked.features[i];\n        break;\n      }\n    }\n\n    if (feature) {\n      try {\n        item.filterIntervalsByFeature(feature, picked);\n        setDatesFromAvailableDates(item.availableDates);\n        setLocation(latLong);\n        setPickerMessages({\n          beforePick: \"Click another point to change the selection\",\n          afterPick: \"Click another point to change the selection\"\n        });\n      } catch (e) {\n        (0, _raiseErrorToUser[\"default\"])(terria, e);\n      }\n    } else {\n      setPickerMessages({\n        beforePick: \"Error when trying to resolve imagery at location! Please select a different location or zoom level.\",\n        afterPick: \"Click another point to change the selection\"\n      });\n    }\n  }\n\n  function cancelDeltaTool() {\n    if (item) item.isEnabled = false;\n    onCloseTool();\n  }\n\n  function generateDelta() {\n    var timestamp = (0, _dateformat[\"default\"])(new Date(), \"yyyy-mm-dd'T'HH:MM:ss.l'Z'\");\n    item.name = \"Change Detection: \".concat(catalogItem.name, \" \").concat(timestamp);\n    item.featureTimesProperty = undefined; // Hide the location filter\n\n    item.clock = undefined; // Make it a non-time-dynamic item\n\n    item.intervals = undefined;\n    item.supportsDeltaComparison = false;\n    item.disableUserChanges = true; // Hide controls like the style selector\n\n    var firstDateStr = dateDisplayFormat(primaryDate);\n    var secondDateStr = dateDisplayFormat(secondaryDate); // Trim lines to prevent <pre> wrapping during markdown conversion\n\n    item.shortReport = trimLines(\"\\n      \".concat(t(\"deltaTool.catalogItem.description\"), \"\\n\\n      **\").concat(t(\"deltaTool.primaryImage\"), \"**:   \").concat(firstDateStr, \"<br/>\\n      **\").concat(t(\"deltaTool.secondaryImage\"), \"**: \").concat(secondDateStr, \"\\n    \")); // item.loadingMessage = \"Loading difference map\";\n    // item.isLoading = true;\n\n    var firstDateParam = dateParamFormat(primaryDate);\n    var secondDateParam = dateParamFormat(secondaryDate);\n    item.parameters[\"time\"] = \"\".concat(firstDateParam, \",\").concat(secondDateParam);\n    item.showDeltaImagery(firstDateParam, secondDateParam);\n    onCloseTool();\n  } // Set primary & secondary dates to the last 2 available dates\n\n\n  function setDatesFromAvailableDates(availableDates) {\n    var _availableDates$slice = availableDates.slice(availableDates.length - 2),\n        _availableDates$slice2 = _slicedToArray(_availableDates$slice, 2),\n        primaryDate = _availableDates$slice2[0],\n        secondaryDate = _availableDates$slice2[1];\n\n    if (primaryDate) {\n      setPrimaryDate(primaryDate);\n      setSecondaryDate(secondaryDate || primaryDate);\n    }\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _deltaTool[\"default\"].deltaTool\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"h1\", {\n    className: _deltaTool[\"default\"].title\n  }, t(\"deltaTool.titlePrefix\"), \": \", catalogItem.name), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _deltaTool[\"default\"].body\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, t(\"deltaTool.description\")), location && /*#__PURE__*/_react[\"default\"].createElement(PrettyLocation, {\n    location: location\n  }), location === undefined ? /*#__PURE__*/_react[\"default\"].createElement(\"h3\", null, t(\"deltaTool.pickLocation\")) : /*#__PURE__*/_react[\"default\"].createElement(_DatePickers[\"default\"], {\n    item: item,\n    primaryDate: primaryDate,\n    setPrimaryDate: setPrimaryDate,\n    secondaryDate: secondaryDate,\n    setSecondaryDate: setSecondaryDate\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _deltaTool[\"default\"].buttons\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n    className: _deltaTool[\"default\"].cancelBtn,\n    onClick: cancelDeltaTool\n  }, t(\"deltaTool.cancelBtn\")), /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n    className: _deltaTool[\"default\"].generateDeltaBtn,\n    onClick: generateDelta,\n    disabled: location === undefined\n  }, t(\"deltaTool.generateDeltaBtn\")))), /*#__PURE__*/_react[\"default\"].createElement(_LocationPicker[\"default\"], {\n    terria: terria,\n    location: location,\n    onPick: onUserPickLocation,\n    messages: pickerMessages\n  }));\n}\n\nDeltaTool.propTypes = {\n  terria: _propTypes[\"default\"].object.isRequired,\n  tool: _propTypes[\"default\"].object.isRequired,\n  onCloseTool: _propTypes[\"default\"].func.isRequired,\n  t: _propTypes[\"default\"].func.isRequired\n};\nDeltaTool.displayName = \"DeltaTool\";\n\nfunction PrettyLocation(_ref2) {\n  var location = _ref2.location;\n\n  var _useTranslation = (0, _reactI18next.useTranslation)(),\n      t = _useTranslation.t;\n\n  var prettyLocation = (0, _prettifyCoordinates[\"default\"])(location.longitude, location.latitude);\n  return /*#__PURE__*/_react[\"default\"].createElement(\"section\", null, /*#__PURE__*/_react[\"default\"].createElement(\"h4\", null, t(\"deltaTool.selectedLocation\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _deltaTool[\"default\"].location\n  }, prettyLocation.latitude, \", \", prettyLocation.longitude));\n}\n\nPrettyLocation.propTypes = {\n  location: _propTypes[\"default\"].object.isRequired\n};\nPrettyLocation.displayName = \"PrettyLocation\";\n\nfunction trimLines(text) {\n  return text.split(\"\\n\").map(function (ln) {\n    return ln.trim();\n  }).join(\"\\n\");\n}\n\nfunction dateParamFormat(date) {\n  return (0, _dateformat[\"default\"])(date, \"yyyy-mm-dd'T'HH:MM:ss.l'Z'\", true);\n}\n\nfunction dateDisplayFormat(date) {\n  return (0, _dateformat[\"default\"])(date, \"dd-mm-yyyy\", true);\n}\n\nvar _default = (0, _reactI18next.withTranslation)()(DeltaTool);\n\nexports[\"default\"] = _default;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deltaTool\":\"tjs-delta-tool__deltaTool tjs-tool-panel__tool\",\"title\":\"tjs-delta-tool__title\",\"body\":\"tjs-delta-tool__body\",\"buttons\":\"tjs-delta-tool__buttons\",\"cancelBtn\":\"tjs-delta-tool__cancelBtn tjs-_buttons__btn-grey\",\"generateDeltaBtn\":\"tjs-delta-tool__generateDeltaBtn tjs-_buttons__btn tjs-_buttons__btn-primary\",\"location\":\"tjs-delta-tool__location\",\"datePickers\":\"tjs-delta-tool__datePickers\",\"pickerButtons\":\"tjs-delta-tool__pickerButtons\",\"currentDate\":\"tjs-delta-tool__currentDate tjs-_buttons__btn\",\"previousDate\":\"tjs-delta-tool__previousDate tjs-_buttons__btn\",\"nextDate\":\"tjs-delta-tool__nextDate tjs-_buttons__btn\",\"picker\":\"tjs-delta-tool__picker\",\"datePickerPopup\":\"tjs-delta-tool__datePickerPopup\"};","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _dateformat = _interopRequireDefault(require(\"dateformat\"));\n\nvar _defined = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/defined\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _DateFormats = require(\"../../BottomDock/Timeline/DateFormats\");\n\nvar _DateTimePicker = _interopRequireDefault(require(\"../../../ReactViews/BottomDock/Timeline/DateTimePicker.jsx\"));\n\nvar _Icon = _interopRequireDefault(require(\"../../Icon.jsx\"));\n\nvar _deltaTool = _interopRequireDefault(require(\"./delta-tool.scss\"));\n\nvar _reactI18next = require(\"react-i18next\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * Primary and secondary date pickers for delta tool\n */\nfunction DatePickers(_ref) {\n  var item = _ref.item,\n      primaryDate = _ref.primaryDate,\n      setPrimaryDate = _ref.setPrimaryDate,\n      secondaryDate = _ref.secondaryDate,\n      setSecondaryDate = _ref.setSecondaryDate,\n      t = _ref.t;\n  var pickers = [useDatePickerState(), useDatePickerState()]; // Set a pickers state. If the target picker opens, close the other.\n\n  var _setIsOpen = function setIsOpen(pickerId, isOpen) {\n    var _ref2 = pickerId === 0 ? pickers : [pickers[1], pickers[0]],\n        _ref3 = _slicedToArray(_ref2, 2),\n        thisPicker = _ref3[0],\n        otherPicker = _ref3[1];\n\n    thisPicker.setIsOpen(isOpen);\n\n    if (isOpen) {\n      otherPicker.setIsOpen(false); // close other picker\n    }\n  };\n\n  var availableDates = item.availableDates;\n  var dateFormatting = item.dateFormat && item.dateFormat.currentTime;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _deltaTool[\"default\"].datePickers\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"section\", null, /*#__PURE__*/_react[\"default\"].createElement(\"h4\", null, t(\"deltaTool.primaryImage\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    title: \"Select a time\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(DatePicker, {\n    date: primaryDate,\n    setDate: setPrimaryDate,\n    availableDates: availableDates,\n    dateFormatting: dateFormatting,\n    isOpen: pickers[0].isOpen,\n    setIsOpen: function setIsOpen(isOpen) {\n      return _setIsOpen(0, isOpen);\n    }\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"section\", null, /*#__PURE__*/_react[\"default\"].createElement(\"h4\", null, t(\"deltaTool.secondaryImage\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    title: \"Select a time\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(DatePicker, {\n    date: secondaryDate,\n    setDate: setSecondaryDate,\n    availableDates: availableDates,\n    dateFormatting: dateFormatting,\n    isOpen: pickers[1].isOpen,\n    setIsOpen: function setIsOpen(isOpen) {\n      return _setIsOpen(1, isOpen);\n    }\n  }))));\n}\n\nDatePickers.propTypes = {\n  item: _propTypes[\"default\"].object.isRequired,\n  primaryDate: _propTypes[\"default\"].object.isRequired,\n  setPrimaryDate: _propTypes[\"default\"].func.isRequired,\n  secondaryDate: _propTypes[\"default\"].object.isRequired,\n  setSecondaryDate: _propTypes[\"default\"].func.isRequired,\n  t: _propTypes[\"default\"].func.isRequired\n};\n/**\n * Delta tool date picker\n */\n\nfunction DatePicker(_ref4) {\n  var date = _ref4.date,\n      availableDates = _ref4.availableDates,\n      setDate = _ref4.setDate,\n      dateFormatting = _ref4.dateFormatting,\n      isOpen = _ref4.isOpen,\n      setIsOpen = _ref4.setIsOpen;\n\n  var toggleOpen = function toggleOpen(e) {\n    setIsOpen(!isOpen);\n    e.stopPropagation();\n  };\n\n  var formattedDate = (0, _defined[\"default\"])(dateFormatting) ? (0, _dateformat[\"default\"])(date, dateFormatting) : (0, _DateFormats.formatDateTime)(date);\n\n  var _findNextAndPrevDates = findNextAndPrevDates(date, availableDates),\n      prevDate = _findNextAndPrevDates.prevDate,\n      nextDate = _findNextAndPrevDates.nextDate;\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _deltaTool[\"default\"].pickerButtons\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n    className: _deltaTool[\"default\"].previousDate,\n    title: \"Previous time\",\n    disabled: !(0, _defined[\"default\"])(prevDate),\n    onClick: function onClick() {\n      return setDate(prevDate);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Icon[\"default\"], {\n    glyph: _Icon[\"default\"].GLYPHS.previous\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n    className: _deltaTool[\"default\"].currentDate,\n    onClick: toggleOpen,\n    title: \"Select a time\"\n  }, (0, _defined[\"default\"])(formattedDate) ? formattedDate : \"Currently out of range.\"), /*#__PURE__*/_react[\"default\"].createElement(\"button\", {\n    className: _deltaTool[\"default\"].nextDate,\n    title: \"Next time\",\n    disabled: !(0, _defined[\"default\"])(nextDate),\n    onClick: function onClick() {\n      return setDate(nextDate);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Icon[\"default\"], {\n    glyph: _Icon[\"default\"].GLYPHS.next\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _deltaTool[\"default\"].picker\n  }, /*#__PURE__*/_react[\"default\"].createElement(_DateTimePicker[\"default\"], {\n    currentDate: date,\n    dates: availableDates,\n    onChange: setDate,\n    popupStyle: _deltaTool[\"default\"].datePickerPopup,\n    openDirection: \"none\",\n    isOpen: isOpen,\n    showCalendarButton: false,\n    onOpen: function onOpen() {\n      return setIsOpen(true);\n    },\n    onClose: function onClose() {\n      return setIsOpen(false);\n    }\n  })));\n}\n\nDatePicker.propTypes = {\n  date: _propTypes[\"default\"].object.isRequired,\n  setDate: _propTypes[\"default\"].func.isRequired,\n  availableDates: _propTypes[\"default\"].array.isRequired,\n  dateFormatting: _propTypes[\"default\"].string,\n  isOpen: _propTypes[\"default\"].bool,\n  setIsOpen: _propTypes[\"default\"].func.isRequired\n};\n\nfunction findNextAndPrevDates(date, availableDates) {\n  var dateIndex = availableDates.indexOf(date);\n  var prevDate = dateIndex > 0 ? availableDates[dateIndex - 1] : undefined;\n  var nextDate = dateIndex < availableDates.length - 1 ? availableDates[dateIndex + 1] : undefined;\n  return {\n    prevDate: prevDate,\n    nextDate: nextDate\n  };\n}\n\nfunction useDatePickerState() {\n  var _useState = (0, _react.useState)(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  return {\n    isOpen: isOpen,\n    setIsOpen: setIsOpen\n  };\n}\n\nvar _default = (0, _reactI18next.withTranslation)()(DatePickers);\n\nexports[\"default\"] = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Ellipsoid = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/Ellipsoid\"));\n\nvar _Math = _interopRequireDefault(require(\"terriajs-cesium/Source/Core/Math\"));\n\nvar _knockout = _interopRequireDefault(require(\"terriajs-cesium/Source/ThirdParty/knockout\"));\n\nvar _LocationMarkerUtils = require(\"../../../Models/LocationMarkerUtils.js\");\n\nvar _MapInteractionMode = _interopRequireDefault(require(\"../../../Models/MapInteractionMode\"));\n\nvar _Loader = _interopRequireDefault(require(\"../../Loader\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * Allows user to pick a point on the map\n */\nfunction LocationPicker(_ref) {\n  var terria = _ref.terria,\n      messages = _ref.messages,\n      location = _ref.location,\n      onPick = _ref.onPick;\n  (0, _react.useEffect)(function () {\n    var currentPick;\n    var pickPointMode = new _MapInteractionMode[\"default\"]({\n      message: messages.beforePick\n    });\n    terria.mapInteractionModeStack.push(pickPointMode);\n    showMarker(location);\n\n    var subscription = _knockout[\"default\"].getObservable(pickPointMode, \"pickedFeatures\").subscribe(function (thisPick) {\n      currentPick = thisPick;\n\n      pickPointMode.customUi =\n      /* eslint-disable-line react/display-name */\n      function () {\n        return /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], {\n          message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n        });\n      };\n\n      pickPointMode.message = function () {\n        return messages.afterPick;\n      };\n\n      var position = cartesianToDegrees(thisPick.pickPosition);\n      showMarker(position);\n      currentPick.allFeaturesAvailablePromise.then(function () {\n        if (currentPick === thisPick) {\n          onPick(thisPick, position);\n        }\n      });\n    });\n\n    return function () {\n      // disposer\n      currentPick = undefined;\n      subscription.dispose();\n      stopInteractionMode(pickPointMode);\n      (0, _LocationMarkerUtils.removeMarker)(terria);\n    };\n  });\n\n  var showMarker = function showMarker(location) {\n    if (location) {\n      (0, _LocationMarkerUtils.addMarker)(terria, {\n        name: \"User selection\",\n        location: location\n      });\n    }\n  };\n\n  var stopInteractionMode = function stopInteractionMode(pickPointMode) {\n    var _terria$mapInteractio = terria.mapInteractionModeStack.slice(-1),\n        _terria$mapInteractio2 = _slicedToArray(_terria$mapInteractio, 1),\n        currentMode = _terria$mapInteractio2[0];\n\n    if (currentMode === pickPointMode) {\n      terria.mapInteractionModeStack.pop();\n    }\n  };\n\n  return null;\n}\n\nLocationPicker.propTypes = {\n  terria: _propTypes[\"default\"].object.isRequired,\n  messages: _propTypes[\"default\"].object.isRequired,\n  location: _propTypes[\"default\"].object,\n  onPick: _propTypes[\"default\"].func.isRequired\n};\nLocationPicker.displayName = \"LocationPicker\";\n\nfunction cartesianToDegrees(cartesian) {\n  var carto = _Ellipsoid[\"default\"].WGS84.cartesianToCartographic(cartesian);\n\n  return {\n    longitude: _Math[\"default\"].toDegrees(carto.longitude),\n    latitude: _Math[\"default\"].toDegrees(carto.latitude)\n  };\n}\n\nvar _default = LocationPicker;\nexports[\"default\"] = _default;"],"sourceRoot":""}